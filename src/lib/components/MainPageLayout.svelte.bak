<script lang="ts">
	import Formula from "./dynamic/Formula.svelte";
	import Quote from "./dynamic/Quote.svelte";
	import ToRemember from "./dynamic/ToRemember.svelte";
	import AnimatedSection from "./dynamic/AnimatedSection.svelte";
	import SequentialAnimator from "./dynamic/SequentialAnimator.svelte";

	import beforelearning from "$lib/assets/before_learning.svg";
	import afterlearning from "$lib/assets/after_learning.svg";
	import whilelearning from "$lib/assets/while_learning.svg";
	import learnermonke from "$lib/assets/learner_monke.svg";
	const images = [beforelearning, whilelearning, afterlearning, learnermonke];

	let sidebarWidth = 15;
	let isResizing = false;

	function handleMouseDown() {
		isResizing = true;
	}

	function handleMouseUp() {
		isResizing = false;
	}

	function handleMouseMove(e: MouseEvent) {
		if (!isResizing) return;

		const newWidth = (e.clientX / window.innerWidth) * 100;
		if (newWidth > 10 && newWidth < 50) {
			sidebarWidth = newWidth;
		}
	}

	import { onMount } from "svelte";
	import Counter from "./dynamic/Counter.svelte";
	onMount(() => {
		const track = document.querySelector(".carousel-track") as HTMLElement;
		if (!track) return;

		const halfWidth = track.scrollWidth / 2;
		track.style.setProperty("--track-width", `${halfWidth}px`);
	});
</script>

<svelte:window on:mousemove={handleMouseMove} on:mouseup={handleMouseUp} />

<div class="flex-1 w-screen flex flex-row overflow-hidden">
	<div
		style="width: {sidebarWidth}%"
		class="h-full p-3 select-none overflow-y-auto"
	>
		sidebar content
	</div>

	<!-- svelte-ignore a11y_no_noninteractive_element_interactions -->
	<div
		class="w-1 bg-gray-500 hover:bg-gray-400 cursor-col-resize transition-colors"
		on:mousedown={handleMouseDown}
		role="separator"
		aria-label="Resize sidebar"
	></div>

	<div
		id="main-content"
		style="width: {100 - sidebarWidth}%"
		class="overflow-y-auto overflow-x-hidden flex flex-col gap-15 items-center py-4"
	>
		<div class="flex flex-row items-center w-full gap-5 px-4">
			<div
				class="tenor-gif-embed w-45 h-45 pointer-events-none justify-start"
				data-postid="20079899"
				data-share-method="host"
				data-aspect-ratio="1"
				data-width="50%"
			>
				<a href="https://tenor.com/view/monkey-gif-20079899"
					>Monkey Sticker</a
				>from
				<a href="https://tenor.com/search/monkey-stickers"
					>Monkey Stickers</a
				>
			</div>
			<script
				type="text/javascript"
				async
				src="https://tenor.com/embed.js"
			></script>

			<div class="flex flex-col gap-1 w-full items-start text-left">
				<h1 class="text-4xl mb-2">HOO HOO HOO!</h1>
				<p>
					This is <span class="monkeText">Monke</span>. Monke teaches
					you <span class="mlText">machine learning</span>.
				</p>
				<p>
					Less words, more learning. <span class="monkeText"
						>Monke</span
					> happy, you happy :3
				</p>
			</div>

			<div class="scale-90 w-full">
				<ToRemember
					title="Pro Tip"
					content={[
						"Try clicking on the highlighted words throughout the blog.",
						"Also try selecting a bunch of text and exploring the AI Explanation!",
					]}
				/>
			</div>
		</div>

		<!-- svelte-ignore a11y_no_static_element_interactions -->
		<div id="carousel" class="carousel-container w-full">
			<div class="carousel-track" style="animation-play-state: running">
				{#each [...images, ...images] as img}
					<img class="carousel-img-class" src={img} alt="carousel" />
				{/each}
			</div>
		</div>

		<Counter count={1} />
		<p class="text-center text-lg px-3 -mt-10">
			We'll discuss the <span class="text-3xl bFont">logic</span>,
			intuition and the <span class="text-3xl bFont">mathematics</span> behind
			each step of machine learning paradigms to properly understand each and
			every concept.
		</p>

		<Counter count={2} />
		<div class="text-center px-3 -mt-10 w-full">
			<div class="text-3xl bFont mb-5">I follow:</div>
			<div class="self-center  text-lg">

				<div id="op-animation">
					◦ less words, more learning. THIS IS <span
						class="text-3xl bFont">NOT</span
					>
					AN ACADEMIC TEXTBOOK.<br />
					<span class="italic text-sm"
						>[note: no academic paper has dancing monke gifs.]</span
					>
					<img
						class="mx-auto rounded-2xl border border-gray-300 mt-3 mb-10"
						alt="few words"
						src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTER0tuZtB_opN6Lr9DxgL_lQbVUd8mX3381A&s"
					/>
				</div>

				<div id="op-animation">
					◦ i <span class="text-3xl bFont">hate</span> AI slop. everything is written using this Monke brain.<br
					/>
					<img
						class="mx-auto rounded-2xl border border-gray-300 mt-3 mb-10 w-64"
						alt="big bwain"
						src="https://i.pinimg.com/736x/68/07/b0/6807b07a68d7aa045e2bfeebedee7d7d.jpg"
					/>
				</div>

				<div id="op-animation">
					◦ learn first, apply later.<br />
					<span class="italic text-sm"
						>No BS about learning quick! Learning never quick, must be as slow as possible to understand everything. learn at your own pace.</span
					>
				</div>

				<br />

				<div class="mb-10"></div>
				
				<div id="op-animation">
					◦ learning must be fun. <span class="text-3xl bFont">have fun</span>, hoo hoo hoo! :3<br />
					<span class="italic text-sm mb-10"
						>don’t shy away from exploring the additional resources provided by me - the most learned monke, Monke.</span
					>
				</div>

			</div>
		</div>
		<!-- <Quote
			pText="As Albert Einstein once said,"
			quote="Life is like riding a bicycle. To keep your balance you must keep moving."
			sText="So keep learning and growing!"
		/>

		<Formula formula="E = mc^2" />

		<ToRemember
			title="Big Bwain Einstein"
			content={[
				"E = mc^2",
				"Energy equals mass times the speed of light squared",
				"This equation is a fundamental principle of physics.",
			]}
		/> -->
	</div>
</div>

<style>
	.carousel-container {
		width: 100%;
	}

	.carousel-track {
		display: flex;
		gap: 1rem;
		width: max-content;
		animation: scroll 50s linear infinite;
		will-change: transform;
	}

	@keyframes scroll {
		from {
			transform: translateX(0);
		}
		to {
			transform: translateX(calc(-1 * var(--track-width)));
		}
	}

	:global(.carousel-img-class) {
		width: 400px;
		height: 400px;
		flex-shrink: 0;
		object-fit: cover;
	}
</style>
